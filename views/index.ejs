<!DOCTYPE html>
<html>

<head>
  <title><%= title %></title>
  <!-- <script src="https://kit.fontawesome.com/0a2b8cf434.js" crossorigin="anonymous"></script> -->
  <link rel="icon" href="/images/favicon.svg">
  <link rel="stylesheet" href="/stylesheets/momentum-ui-icons.min.css">
  <link rel="stylesheet" href="/stylesheets/momentum-ui.min.css">
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link rel='stylesheet' href='/stylesheets/card-style.css' />
  <link rel='stylesheet' href='/stylesheets/table.css' />
</head>

<body>
  <header class="md-top-bar md-top-bar--blue" role="navigation">
    <div class="md-top-bar__container">
      <div class="md-top-bar__brand">
        <a class="md-brand" href="/">
          <div class="md-brand__logo md-brand__logo--pad">
            <!-- Note: use either image or icon, but not both -->
            <!-- img src="/assets/spark-logo.svg" alt="Momentum UI" -->
            <i class="icon icon-cisco-logo"></i>
          </div>
          <div class="md-brand__title"><%= title %> </i></div>
        </a>
      </div>
      <nav class="md-top-bar__nav ">
        <div class="md-list md-list--horizontal" role="list">
          <!-- <a class="md-list-item active" role="listItem" href="javascript:void(0)">Develop</a> -->
        </div>
      </nav>
      <div class="md-top-bar__right ">
        <!-- Note: conditionally show top-bar__user or top-bar__logged-out -->
        <div class="md-top-bar__user">
          <button class="md-avatar md-button md-button--circle md-button--link">
            CU
          </button>
        </div>
      </div>
    </div>
  </header>
  <div>

  </div>
  <div class="main-container">
    <div class="outer-wrap">
      <div class="content">

        <main class="main-area">
          <section class="cards">
            <article class="card">
              <div class="card-content">
                <form ref='uploadForm' id='uploadForm' action='/upload' method='post' encType="multipart/form-data">
                  <h2>Upload a macro to Websrv2 <i class="icon icon-cloud-upload_24"></i></h2>
                  <hr><br><br>
                  <div style="
                display: flex;
                flex-direction: column;
                align-items: baseline;">
                    <input type="file" name="sampleFile" required /><br>
                    <div class="md-input-container md-radio">
                      <input type="radio" class="md-input md-radio__input" id="basicRadio1" name="basicRadio"
                        value="macro" checked>
                      <label class="md-radio__label" for="basicRadio1">
                        <span>Macro</span>
                      </label>
                    </div>
                    <div class="md-input-container md-radio">
                      <input type="radio" class="md-input md-radio__input" id="basicRadio2" name="basicRadio"
                        value="panel">
                      <label class="md-radio__label" for="basicRadio2">
                        <span>UI File</span>
                      </label>
                    </div><br>
                    <div class="docs-example docs-example--spacing">
                      <button type='submit' class="md-button md-button--blue">Upload !</button>
                    </div>
                  </div>

                </form>
                <br><br>
                <form action="/deleteFile" method="POST">
                  <h2>Remove a File from Websrv2 <i class="icon icon-file-excel_28"></i></h2>
                  <hr>
                  <label><b>Select file :</b></label><br><br>
                  <div>
                    <select name="file" id="file">
                      <% for (macro of marcosAvailable) { %>
                      <option value="./uploads/macros/<%=macro%>"><%=macro%></option>
                      <% } %>

                      <% for (panel of panelAvailable) { %>
                      <option value="./uploads/panels/<%=panel%>"><%=panel%></option>
                      <% } %>
                    </select>
                  </div><br><br>
                  <div class="docs-example docs-example--spacing">
                    <button type='submit' class="md-button md-button--red">Delete !</button>
                  </div>
                </form>
              </div><!-- .card-content -->
            </article><!-- .card -->



            <article class="card">
              <div class="card-content">
                <form id="sendFileToDevice" action="/saveFile" method="POST">
                  <h2>Send files to devices <i class="icon icon-send_24"></i></h2>
                  <hr>
                  <div style="display: flex; align-items: center;">
                    <button id="switchTable" type="button"
                      class="md-button md-button--circle md-button--blue icon icon-exchange_16"></button>
                    <label><b>&nbsp;Select files :</b></label>
                  </div><br>
                  <table id="macroTable" style="text-align: justify; white-space: nowrap;">
                    <caption>macros</caption>
                    <% var cpt = 0; %>
                    <% for (macro of marcosAvailable) { %>
                    <tr>
                      <th>
                        <div class="md-input-container md-checkbox">
                          <input id="macro<%=cpt%>" type="checkbox" class="md-input md-checkbox__input check"
                            name="macroSelected" value='{"macroName":"<%=macro%>","activationOnInstall":"False"}'>
                          <label class="md-checkbox__label" for="macro<%=cpt%>">
                            <span><%= macro %></span>
                          </label>
                        </div><br>
                      </th>
                      <th>
                        <div class="md-input-container md-toggle-switch ">
                          <input class="md-input md-toggle-switch__input id-check" type="checkbox" aria-checked="false"
                            name="" id="testToggleSwitch<%=cpt%>" data-associate-input-id="macro<%=cpt%>" value="" />
                          <label class="md-toggle-switch__label" for="testToggleSwitch<%=cpt%>">
                            <span class="md-toggle-switch__label__container"></span>
                            <span class="md-toggle-switch__label__text">Enable/Disable</span>
                          </label>
                        </div>
                      </th>
                    </tr>
                    <% cpt++ %>
                    <% } %>
                  </table>

                  <table id="panelTable" style="text-align: justify; white-space: nowrap;" hidden>
                    <caption>panels</caption>
                    <% var cpt = 0; %>
                    <% for (panel of panelAvailable) { %>
                    <tr>
                      <th>
                        <div class="md-input-container md-checkbox">
                          <input id="panel<%=cpt%>" type="checkbox" class="md-input md-checkbox__input check"
                            name="panelSelected" value='<%=panel%>'>
                          <label class="md-checkbox__label" for="panel<%=cpt%>">
                            <span><%= panel %></span>
                          </label>
                        </div><br>
                      </th>
                    </tr>
                    <% cpt++ %>
                    <% } %>
                  </table>
                  <br>
                  <label for="deviceId"><b>Select Device : </b></label><br><br>
                  <div class="scroll-div" style="overflow: scroll;height: 15rem;">
                    <% var cpt2 = 0; %>
                    <% for (device of devices) { %>
                    <% if(device.connectionStatus === "disconnected"){ %>
                    <div class="md-input-container md-checkbox">
                      <input id="device<%=cpt2%>" type="checkbox" name="deviceSelected" value="<%=device.id%>"
                        class="md-input md-checkbox__input check-device" disabled>
                      <label class="md-checkbox__label" for="device<%=cpt2%>">
                        <span class="space-between"><%= device.displayName %> <span
                            class="md-badge md-badge--red-pastel"><%= device.connectionStatus %></span></span>
                      </label><br>
                    </div>
                    <% } else if(device.connectionStatus === "connected_with_issues") { %>
                    <div class="md-input-container md-checkbox">
                      <input id="device<%=cpt2%>" type="checkbox" name="deviceSelected" value="<%=device.id%>"
                        class="md-input md-checkbox__input check-device">
                      <label class="md-checkbox__label" for="device<%=cpt2%>">
                        <span class="space-between"><%= device.displayName %> <span
                            class="md-badge md-badge--yellow-pastel"><%= device.connectionStatus %></span></span>
                      </label><br>
                    </div>
                    <% } else { %>
                    <div class="md-input-container md-checkbox">
                      <input id="device<%=cpt2%>" type="checkbox" name="deviceSelected" value="<%=device.id%>"
                        class="md-input md-checkbox__input check-device">
                      <label class="md-checkbox__label" for="device<%=cpt2%>">
                        <span class="space-between"><%= device.displayName %> <span
                            class="md-badge md-badge--green-pastel"><%= device.connectionStatus %></span></span>
                      </label><br>
                    </div>
                    <% } %>
                    <% cpt2++ %>
                    <% } %>
                  </div>
                  <br>
                  <div class="docs-example docs-example--spacing">
                    <button type='submit' class="md-button md-button--blue">Upload !</button>
                  </div>
                </form>
              </div><!-- .card-content -->
            </article><!-- .card -->

            <article class="card">
              <div class="card-content">
                <form id="removeAllMacroFromDevice" action="/removeAllMacro" method="POST">
                  <h2>Remove all files from a device <i class="icon icon-delete_24"></i></h2>
                  <hr>

                  <div class="md-input-container md-checkbox" style="display: flex;
                    flex-direction: row;
                    justify-content: space-between;">
                    <input name="allMacro" id="all-macro-checkbox" type="checkbox" class="md-input md-checkbox__input" checked>
                    <label class="md-checkbox__label" for="all-macro-checkbox">
                      <span>Remove All Macro</span>
                    </label>
                    <input name="allPanel" id="all-panel-checkbox" type="checkbox" class="md-input md-checkbox__input" checked>
                    <label class="md-checkbox__label" for="all-panel-checkbox">
                      <span>Remove All Panel</span>
                    </label>
                  </div>

                  <hr>
                  <label><b>Select Device : </b></label><br><br>
                  <div class="scroll-div" style="overflow: scroll;height: 30rem;">
                    <% var cpt3 = cpt2; %>
                    <% for (device of devices) { %>
                    <% if(device.connectionStatus === "disconnected"){ %>
                    <div class="md-input-container md-checkbox">
                      <input id="device<%=cpt3%>" type="checkbox" name="deviceSelected" value="<%=device.id%>"
                        class="md-input md-checkbox__input check-device-all-macro" disabled>
                      <label class="md-checkbox__label" for="device<%=cpt3%>">
                        <span class="space-between"><%= device.displayName %> <span
                            class="md-badge md-badge--red-pastel"><%= device.connectionStatus %></span></span>
                      </label><br>
                    </div>
                    <% } else if(device.connectionStatus === "connected_with_issues") { %>
                    <div class="md-input-container md-checkbox">
                      <input id="device<%=cpt3%>" type="checkbox" name="deviceSelected" value="<%=device.id%>"
                        class="md-input md-checkbox__input check-device-all-macro">
                      <label class="md-checkbox__label" for="device<%=cpt3%>">
                        <span class="space-between"><%= device.displayName %> <span
                            class="md-badge md-badge--yellow-pastel"><%= device.connectionStatus %></span></span>
                      </label><br>
                    </div>
                    <% } else { %>
                    <div class="md-input-container md-checkbox">
                      <input id="device<%=cpt3%>" type="checkbox" name="deviceSelected" value="<%=device.id%>"
                        class="md-input md-checkbox__input check-device-all-macro">
                      <label class="md-checkbox__label" for="device<%=cpt3%>">
                        <span class="space-between"><%= device.displayName %> <span
                            class="md-badge md-badge--green-pastel"><%= device.connectionStatus %></span></span>
                      </label><br>
                    </div>
                    <% } %>
                    <% cpt3++ %>
                    <% } %>
                  </div>
                  <br>
                  <div class="docs-example docs-example--spacing">
                    <button type='submit' class="md-button md-button--red">Remove All !</button>
                  </div>
                </form>
              </div><!-- .card-content -->
            </article><!-- .card -->

            <!--<article class="card">
            <a href="#">
              <picture class="thumbnail">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222641/the-sea.jpg">
              </picture>
              <div class="card-content">
                <h2>Headline goes here</h2>
                <p>Here's to alcohol, the cause of — and solution to — all life's problems. How is education supposed to
                  make me feel smarter?</p>
                <p>Besides, every time I learn something new, it pushes some old stuff out of my brain. Remember when I
                  took that home winemaking course, and I forgot how to drive?</p>
              </div>-->
            <!-- .card-content -->
            <!-- </a>
          </article>-->
            <!-- .card -->

          </section><!-- .cards -->
        </main>
      </div><!-- .content -->
    </div><!-- .outer-wrap -->
    <!-- <div class="md-alert-banner md-alert-banner--error">
    <div class="md-alert-banner__text">Error Alert Banner</div>
    <div class="md-alert-banner__close" tabindex="0" role="button" aria-label="Close">
      <i class="icon icon-cancel_16"></i>
    </div>
  </div> -->

    <div>
      <h2>Edit Device <i class="icon icon-edit_24"></i></h2><br>
      <table>
        <thead>
          <tr>
            <th>NAME</th>
            <th>Status</th>

          </tr>
        </thead>
        <% for (device of devices) { %>
        <tr>
          <td><a href="#"><%= device.displayName %></a></td>
          <td>
            <% if(device.connectionStatus === "disconnected"){ %>
            <p class="status status-unpaid"><%= device.connectionStatus %></p>
            <% } else { %>
            <p class="status <%= device.connectionStatus === 'connected_with_issues'?'status-pending':'status-paid' %>">
              <%= device.connectionStatus %></p>
            <% } %>
          </td>
        </tr>
        <% } %>


        <!-- <tr>
            <td><a href="#">INV1002</a></td>
            <td>Sonic</td>
            <td>1/4/2021</td>
            <td>
              <p class="status status-paid">Paid</p>
            </td>
    
          </tr>
          <tr>
            <td><a href="#">INV1003</a></td>
            <td>Innercircle</td>
            <td>1/2/2021</td>
            <td>
              <p class="status status-pending">Pending</p>
            </td>
    
          </tr>
          <tr>
            <td><a href="#">INV1004</a></td>
            <td>Varsity Plus</td>
            <td>12/30/2020</td>
            <td>
              <p class="status status-pending">Pending</p>
            </td>
    
          </tr>
          <tr>
            <td><a href="#">INV1005</a></td>
            <td>Highlander</td>
            <td>12/18/2020</td>
            <td>
              <p class="status status-paid">Paid</p>
            </td>
    
          </tr> -->
        </tr>

      </table>
    </div>
  </div>

</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
  $(document).ready(function () {

    $('.scroll-div').scroll();
    $(".scroll-div").animate({
      scrollTop: 1000
    }, 2000);
    setTimeout(() => {
      $(".scroll-div").animate({
      scrollTop: -1000
    }, 2000);
    }, 500);

    //Switch table (panel or macro)
    $("#switchTable").click(function () {
      // assumes element with id='button'
      $("#panelTable").toggle();
      $("#macroTable").toggle();
    });
    //form submit handler
    $('#sendFileToDevice').submit(function (e) {
      //check atleat 1 checkbox is checked
      if (!$('.check').is(':checked')) {
        alert("Choose at least one file");
        //prevent the default form submit if it is not checked
        e.preventDefault();
      }

      if (!$('.check-device').is(':checked')) {
        alert("Choose at least one device");
        //prevent the default form submit if it is not checked
        e.preventDefault();
      }
    });

    $('#removeAllMacroFromDevice').submit(function (e) {
      //check atleat 1 checkbox is checked
      if (!$('.check-device-all-macro').is(':checked')) {
        alert("Choose at least one device");
        //prevent the default form submit if it is not checked
        e.preventDefault();
      }
    });

    //To enable or disable macro on installation
    $('.id-check').change(function () {
      var inputId = $(this).data('associate-input-id');
      var oldValue = $('#' + inputId).val();
      var tmpValue = JSON.parse(oldValue);

      if ($(this).is(':checked') == false) {
        tmpValue.activationOnInstall = 'False';
        var newValue = JSON.stringify(tmpValue);
        $('#' + inputId).val(newValue);
      } else {
        tmpValue.activationOnInstall = 'True';
        var newValue = JSON.stringify(tmpValue);
        $('#' + inputId).val(newValue);
      }
    });
  });
</script>

</html>